<html>
    <head>
        <title>APIテスト</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script>
            function get_func(url) {
            fetch(url)
            .then(function(response) {
                return response.text();
            })
            .then(function(text) {
                text = JSON.parse(text.replace(/'/g,'"'))
                // ドロップダウンリストにCSVファイルのリストを定義
                let file_list = document.getElementById("file_list");
                for(var i=0;i<text['text'].length;i++){
                    var target = document.createElement('option');
                    target.innerText = text['text'][i]['csvname'];
                    target.setAttribute('value',i+1);
                    file_list.appendChild(target);
                }
            });
            };

            window.onload = function(){
                get_func('http://localhost:8000/getcsvlist');
            };
        </script>
    </head>
<body>
    <h1>CSV Quiz Bot</h1>

    <form>
        <table style="border:none">
            <tr>
                <td>ファイル</td>
                <td>:</td>
                <td>
                    <select id="file_list">
                        <option selected>指定なし</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>問題番号</td>
                <td>:</td>
                <td><input type="text"></td>
            </tr>
        </table>
    </form>

</body>
</html>

